# ReplicaSet


## ReplicaSetを作ろう
まずは先ほどの削除しておきましょう。削除したらPodの確認をし、消えてなくなっていることを確認してください。

```
kubectl delete pod hello-pod
```


早速ReplicaSetを作成します。作成したらPodを確認してください。

`kubectl apply -f replicaset.yaml`


## ReplicaSetによるPod管理の確認
Podがなんか（異常終了とかで）消えた！というのを再現したいのでPodの削除をしてください。


改めてPodの確認をすると削除したはずのPodが（名前は変わっていますが）作成されているのが見えると思います。

これはReplicaSetはPodを常に指定の数だけスケジュールしておくという機能があるためです


## Podのスケジュール数を変えてみよう
ここでマニフェストの中身を見てみましょう。
マニフェストとはapplyで指定した`replicaset.yaml`のことです。

マニフェストの中に`replicas`という定義があり、その値が1になっています。

これをファイルを編集して2に変えてみましょう。書き換えが終わったら再度kubectl applyとPodの確認してください。


Podが2個ありますね。また、AGE列を見ると片方のPodはもう片方より長生きです。
試しに片方削除してください。そしたらまたPodを確認してください。


先ほど説明した指定の数だけスケジュールしておくというのが`replicas`という定義の数値だというのがわかりました。


Podがなくなっても常に復活していていほしいし、負荷とかに合わせ数も増やしたいです、というときはReplicaSetは必要不可欠ですね。


次に行きましょう。